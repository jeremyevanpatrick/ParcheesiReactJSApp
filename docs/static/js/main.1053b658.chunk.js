(this.webpackJsonpparcheesi=this.webpackJsonpparcheesi||[]).push([[0],{14:function(e,t,r){},8:function(e,t,r){"use strict";r.r(t);var s=r(2),n=r(3),a=r(5),i=r(4),o=r(0),l=r(1),c=r.n(l),h=r(6),u=r.n(h),p=(r(14),function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){return Object(s.a)(this,r),t.call(this,e)}return Object(n.a)(r,[{key:"render",value:function(){var e=[];if(this.props.dice.length>0)for(var t=0;t<this.props.dice.length;t++){var r="die die-"+this.props.dice[t].number;this.props.dice[t].active||(r+=" spentDie"),e.push(Object(o.jsxs)("div",{className:r,children:[Object(o.jsx)("span",{children:"\u2022"}),Object(o.jsx)("span",{children:"\u2022"}),Object(o.jsx)("span",{children:"\u2022"}),Object(o.jsx)("span",{children:"\u2022"}),Object(o.jsx)("span",{children:"\u2022"}),Object(o.jsx)("span",{children:"\u2022"}),Object(o.jsx)("b",{children:"10"}),Object(o.jsx)("strong",{children:"20"})]}))}return e}}]),r}(c.a.Component)),d=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){return Object(s.a)(this,r),t.call(this,e)}return Object(n.a)(r,[{key:"handleDragStart",value:function(e){return!1}},{key:"render",value:function(){var e=this,t="token player"+this.props.player+"Token",r=function(){},s=function(){};return this.props.dice.length>0&&this.props.player==this.props.turn&&1==this.props.human&&(r=this.props.onMouseDownMarker,s=this.props.onMouseUpMarker),Object(o.jsx)("div",{className:t,draggable:!1,onDragStart:function(t){return e.handleDragStart(t)},onMouseDown:r,onMouseUp:s,tokenindex:this.props.tokenindex})}}]),r}(c.a.Component),f=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){return Object(s.a)(this,r),t.call(this,e)}return Object(n.a)(r,[{key:"render",value:function(){var e="space";return this.props.safe&&(e+=" safe"),this.props.showMoves.length>0&&-1!=this.props.showMoves.indexOf(this.props.spaceIndex)&&(e+=" highlightSpace"),Object(o.jsx)("div",{positionindex:this.props.spaceIndex,className:e,children:this.props.renderMarkers(this.props.spaceIndex)})}}]),r}(c.a.Component),m=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){return Object(s.a)(this,r),t.call(this,e)}return Object(n.a)(r,[{key:"renderMarkers",value:function(e){for(var t=this.props.players.slice(),r=function(e,t){for(var r=[],s=0;s<e.length;s++)if(null!=e[s].human)for(var n=0;n<e[s].markers.length;n++)e[s].markers[n]==t&&r.push(e[s].player);return r}(t,e),s=[],n=0;n<r.length;n++)s.push(Object(o.jsx)(d,{turn:this.props.turn,dice:t[this.props.turn-1].dice,player:r[n],onMouseDownMarker:this.props.onMouseDownMarker,onMouseUpMarker:this.props.onMouseUpMarker,tokenindex:e,human:t[this.props.turn-1].human}));return s}},{key:"renderSpaceGroup",value:function(e,t,r){for(var s=this,n=[],a=0;a<8;a++)n.push(Object(o.jsx)(f,{spaceIndex:r[a],safe:a==t,showMoves:this.props.showMoves,renderMarkers:function(e){return s.renderMarkers(e)},onMouseDownMarker:this.props.onMouseDownMarker,onMouseUpMarker:this.props.onMouseUpMarker}));return Object(o.jsx)("div",{className:e,children:n})}},{key:"render",value:function(){var e=this.props.quadIndex;if(e%2==0){if(4==e){var t="centerMenu playerTurn"+this.props.turn,r=[];if(0==this.props.gameState||1==this.props.gameState)for(var s=0;s<this.props.players.length;s++){var n="playerHome playerHome",a=this.props.players[s].enters;n+=38==a?"Bottom":55==a?"Right":4==a?"Top":"Left";var i=-1*this.props.players[s].player-10;this.props.showMoves.length>0&&-1!=this.props.showMoves.indexOf(i)&&(n+=" highlightSpace"),r.push(Object(o.jsx)("div",{className:n,positionindex:i,children:this.renderMarkers(i)}))}var l="",c=null,h=null;if(-1==this.props.gameState){t+=" preMenu",l="Parcheesi";for(var u="disableBtn",d=0,f=0;f<this.props.players.length;f++)null!=this.props.players[f].human&&d++;d>1&&(u=""),c=Object(o.jsx)("div",{id:"rollBtn",className:u,onClick:this.props.onClickStartGame,children:"Start Game"});for(var m=[],v=1;v<=4;v++){var k="p_"+v,b="cpu_"+v,g="off_"+v,y="pc_"+v,j="",O="",x="";null==this.props.players[v-1].human?j="checked":this.props.players[v-1].human?this.props.players[v-1].human&&(x="checked"):O="checked",m.push(Object(o.jsxs)("tr",{children:[Object(o.jsxs)("td",{children:["Player ",v]}),Object(o.jsx)("td",{children:Object(o.jsxs)("div",{className:"switch-toggle switch-3 switch-candy",children:[Object(o.jsx)("input",{id:k,name:y,type:"radio",defaultChecked:x,onChange:this.props.onChangeConfigurePlayer}),Object(o.jsxs)("label",{htmlFor:k,children:["P",v]}),Object(o.jsx)("input",{id:b,name:y,type:"radio",defaultChecked:O,onChange:this.props.onChangeConfigurePlayer}),Object(o.jsx)("label",{htmlFor:b,children:"CPU"}),Object(o.jsx)("input",{id:g,name:y,type:"radio",defaultChecked:j,onChange:this.props.onChangeConfigurePlayer}),Object(o.jsx)("label",{htmlFor:g,children:"OFF"})]})})]}))}h=Object(o.jsx)("table",{children:Object(o.jsx)("tbody",{children:m})})}else if(0==this.props.gameState){l="Player "+this.props.turn;var M=this.props.players[this.props.turn-1].dice,C=1!=this.props.players[this.props.turn-1].human||M.length>0&&(M[0].active||M[1].active)?"disableBtn":"";c=this.props.turnComplete?Object(o.jsx)("div",{id:"rollBtn",className:C,onClick:this.props.onClickEndTurn,children:"End Turn"}):Object(o.jsx)("div",{id:"rollBtn",className:C,onClick:this.props.onClickRollDice,children:"Roll Dice"}),h=Object(o.jsx)(p,{dice:M})}else 1==this.props.gameState&&(l=Object(o.jsxs)("div",{children:["Game",Object(o.jsx)("br",{}),"Completed"]}));return Object(o.jsxs)("div",{className:"quadrant home",children:[r,Object(o.jsx)("div",{className:"innerHome",children:Object(o.jsxs)("div",{className:t,children:[Object(o.jsx)("div",{className:"playerTurn",children:l}),Object(o.jsx)("div",{className:"btnArea",children:c}),Object(o.jsx)("div",{className:"diceArea",children:h})]})})]})}var S="outerCircle player"+this.props.player+"Start",w=null==this.props.players[this.props.player-1].human||0!=this.props.gameState&&1!=this.props.gameState?"":"Player "+this.props.player,A=-1*this.props.player,N=null;return 0!=this.props.gameState&&1!=this.props.gameState||(N=this.renderMarkers(A)),Object(o.jsx)("div",{className:"quadrant start",children:Object(o.jsx)("span",{className:S,children:Object(o.jsxs)("span",{className:"innerCircle",children:[Object(o.jsx)("div",{className:"startName",children:w}),Object(o.jsx)("div",{className:"startPosition",positionindex:A,children:N})]})})})}var D=1==e||7==e?"file-v":"row-h",T=1==e||3==e,B=new Array(8),I=new Array(8),R=new Array(8);return 1==e?(B=[0,1,2,3,4,5,6,7],I=[67,167,267,367,467,567,667,767],R=[66,65,64,63,62,61,60,59]):3==e?(B=[15,14,13,12,11,10,9,8],I=[16,116,216,316,416,516,616,716],R=[17,18,19,20,21,22,23,24]):5==e?(B=[58,57,56,55,54,53,52,51],I=[750,650,550,450,350,250,150,50],R=[42,43,44,45,46,47,48,49]):7==e&&(B=[25,26,27,28,29,30,31,32],I=[733,633,533,433,333,233,133,33],R=[41,40,39,38,37,36,35,34]),Object(o.jsxs)("div",{className:"quadrant",children:[this.renderSpaceGroup(D,T?4:3,B),this.renderSpaceGroup(D+" ramp",T?0:7,I),this.renderSpaceGroup(D,T?4:3,R)]})}}]),r}(c.a.Component),v=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){return Object(s.a)(this,r),t.call(this,e)}return Object(n.a)(r,[{key:"render",value:function(){for(var e=[],t=0;t<3;t++){for(var r=[],s=0+3*t;s<3+3*t;s++)r.push(Object(o.jsx)(m,{gameState:this.props.gameState,turn:this.props.turn,quadIndex:s,player:0==s?3:2==s?2:6==s?4:1,onClickRollDice:this.props.onClickRollDice,onMouseDownMarker:this.props.onMouseDownMarker,onMouseUpMarker:this.props.onMouseUpMarker,onChangeConfigurePlayer:this.props.onChangeConfigurePlayer,onClickStartGame:this.props.onClickStartGame,onClickEndTurn:this.props.onClickEndTurn,turnComplete:this.props.turnComplete,showMoves:this.props.showMoves,players:this.props.players}));e.push(Object(o.jsx)("div",{className:"boardRow",children:r}))}return Object(o.jsx)("div",{id:"board",children:e})}}]),r}(c.a.Component),k=function(e){Object(a.a)(r,e);var t=Object(i.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).state={gameState:-1,turn:1,turnComplete:!1,doubles:0,showMoves:[],players:[{human:!0,player:1,enters:38,markers:[-1,-1,-1,-1],dice:[],finished:!1,blockades:[]},{human:!1,player:2,enters:55,markers:[-2,-2,-2,-2],dice:[],finished:!1,blockades:[]},{human:!1,player:3,enters:4,markers:[-3,-3,-3,-3],dice:[],finished:!1,blockades:[]},{human:!1,player:4,enters:21,markers:[-4,-4,-4,-4],dice:[],finished:!1,blockades:[]}]},n.moveMarker=function(e,t){for(var r=this.state.players.slice(),s=0;s<r.length;s++)for(var n=0;n<r[s].markers.length;n++)if(r[s].markers[n]==e){r[s].markers[n]=t;break}this.setState({players:r})},n.addBonusMove=function(e){var t=this.state.players.slice();t[Object.assign(this.state.turn)-1].dice.push({number:e,active:!0}),this.setState({players:t})},n.rollDice=function(e){for(var t=this.state.players.slice(),r=Object.assign(this.state.turn),s=t[r-1],n=!1,a=0;a<s.dice.length;a++)s.dice[a].active&&(n=!0);0==s.dice.length||!n&&this.state.doubles>0?(s.dice=[{number:Math.floor(6*Math.random())+1,active:!0},{number:Math.floor(6*Math.random())+1,active:!0}],this.setState({players:t},function(){var n=!1,a=Object.assign(this.state.doubles);if(s.dice[0].number==s.dice[1].number)if(2==a){var i=function(e){for(var t=null,r=0,s=0;s<e.markers.length;s++)if(-1==[-11,-12,-13,-14].indexOf(e.markers[s])&&-1==[-1,-2,-3,-4].indexOf(e.markers[s])){var n=M(e.enters,e.markers[s],e.enters);r<n&&(r=n,t=e.markers[s])}return t}(s);null!=i&&this.moveMarker(i,-1*s.player),a=0,n=!0}else a++;else a=0;this.setState({doubles:a}),n||!b(t,r)&&s.dice[0].number!=s.dice[1].number?(this.disableAllDice(),this.setState({turnComplete:!0})):b(t,r)||s.dice[0].number!=s.dice[1].number||this.disableAllDice(),e()}.bind(this))):e()},n.disableAllDice=function(){var e=this.state.players.slice(),t=Object.assign(this.state.turn);e[t-1].dice[0].active=!1,e[t-1].dice[1].active=!1,"undefined"!=typeof e[t-1].dice[2]&&(e[t-1].dice[2].active=!1),"undefined"!=typeof e[t-1].dice[3]&&(e[t-1].dice[3].active=!1),this.setState({players:e})},n.manageBlockades=function(){for(var e=this.state.players.slice(),t=Object.assign(this.state.turn),r=[],s=e[t-1].markers.length;s--;)for(var n=e[t-1].markers.length;n--;)if(s!=n&&-1==[-1,-2,-3,-4,-11,-12,-13,-14].indexOf(e[t-1].markers[s])&&e[t-1].markers[s]==e[t-1].markers[n]&&-1==r.indexOf(e[t-1].markers[s])){for(var a=null,i=e[t-1].blockades.length;i--;)e[t-1].blockades[i].position==e[t-1].markers[s]&&(a=i);null!=a?e[t-1].blockades[a].duration+=1:e[t-1].blockades.push({position:e[t-1].markers[s],duration:1}),r.push(e[t-1].markers[s])}for(s=e[t-1].blockades.length;s--;){var o=!1;for(n=r.length;n--;)r[n]==e[t-1].blockades[s].position&&(o=!0);o||e[t-1].blockades.splice(s,1)}for(s=e[t-1].blockades.length;s--;)if(e[t-1].blockades[s].duration>3){for(var l=e[t-1].blockades[s].position,c=-1*e[t-1].player,h=0;h<e[t-1].markers.length;h++)if(e[t-1].markers[h]==l){e[t-1].markers[h]=c;break}e[t-1].blockades.splice(s,1)}this.setState({players:e})},n.endTurn=function(){var e=this.state.players.slice(),t=Object.assign(this.state.turn);e[t-1].dice=[],this.manageBlockades();for(var r=0;t=t==e.length?1:t+1,e[t-1].finished||null==e[t-1].human;)if(++r==e.length)return void this.setState({gameState:1,players:e});this.setState({turn:t,turnComplete:!1,players:e},(function(){0==e[t-1].human&&this.startAiTurn()}))},n.startAiTurn=function(){this.performAiRollAction(function(){var e=this.state.players.slice(),t=Object.assign(this.state.turn);e[t-1].dice[0].number==e[t-1].dice[1].number?this.performAiRollAction(function(){(e=this.state.players.slice())[t-1].dice[0].number==e[t-1].dice[1].number?this.performAiRollAction(function(){this.endTurn()}.bind(this)):this.endTurn()}.bind(this)):this.endTurn()}.bind(this))},n.performAiRollAction=function(e){this.rollDice(function(){this.afterMoveCallback(function(){this.disableAllDice(),e()}.bind(this))}.bind(this))},n.afterMoveCallback=function(e){setTimeout(function(){b(this.state.players.slice(),Object.assign(this.state.turn))?this.loopOverActions(function(){this.setState({showMoves:[]},(function(){e()}))}.bind(this)):e()}.bind(this),500)},n.loopOverActions=function(e){this.breakBlockade(function(t){t?this.afterMoveCallback(e):this.captureEnemy(function(t){t?this.afterMoveCallback(e):this.moveUnsafeToSafe(function(t){t?this.afterMoveCallback(e):this.moveOutOfStart(function(t){t?this.afterMoveCallback(e):this.moveIntoHome(function(t){t?this.afterMoveCallback(e):this.moveToSafeSpace(function(t){t?this.afterMoveCallback(e):this.moveAwayFromNearbyEnemy(function(t){t?this.afterMoveCallback(e):this.moveBehindNearestEnemy(function(t){t?this.afterMoveCallback(e):this.moveMostAdvanced(function(t){t?this.afterMoveCallback(e):e()}.bind(this))}.bind(this))}.bind(this))}.bind(this))}.bind(this))}.bind(this))}.bind(this))}.bind(this))}.bind(this))},n.moveAiMarker=function(e,t,r,s,n){console.log("CPU Player "+s+": "+n),this.setState({showMoves:[t]},(function(){setTimeout(function(){for(var n=0;n<r[s-1].markers.length;n++)if(r[s-1].markers[n]==e){r[s-1].markers[n]=t;break}for(var a=M(e,t,r[s-1].enters),i=C(r[s-1].dice,a),o=0;o<i.length;o++)r[s-1].dice[i[o]].active=!1;for(var l=!1,c=0;c<r[s-1].markers.length;c++)-1==[-11,-12,-13,-14].indexOf(r[s-1].markers[c])&&(l=!0);l||(r[s-1].finished=!0),this.setState({players:r})}.bind(this),500)}))},n.breakBlockade=function(e){for(var t=this.state.players.slice(),r=Object.assign(this.state.turn),s=null,n=0;n<t[r-1].blockades.length;n++)if(3==t[r-1].blockades[n].duration){s=t[r-1].blockades[n].position;break}if(null!=s){var a=x(s,t,r);if(a.length>0){for(n=0;n<a.length;n++){for(var i=t[r-1].blockades.length;i--;)if(t[r-1].blockades[i].position==s){t[r-1].blockades.splice(n,1);break}this.moveAiMarker(s,a[n],t,r,"breakBlockade");break}return void e(!0)}}e(!1)},n.captureEnemy=function(e){for(var t=this.state.players.slice(),r=Object.assign(this.state.turn),s=[],n=0;n<t[r-1].markers.length;n++){var a=t[r-1].markers[n];s.push(x(a,t,r))}for(var i=0;i<s.length;i++)for(var o=0;o<t.length;o++)if(o!=r-1)for(var l=0;l<t[o].markers.length;l++){var c=t[o].markers[l];if(-1!=s[i].indexOf(c)){this.moveMarker(c,-1*t[o].player);var h=t[r-1].markers[i];return this.moveAiMarker(h,c,t,r,"captureEnemy"),this.addBonusMove(20),void e(!0)}}e(!1)},n.moveUnsafeToSafe=function(e){for(var t=this.state.players.slice(),r=Object.assign(this.state.turn),s=[],n=0;n<t[r-1].markers.length;n++){var a=t[r-1].markers[n];s.push(x(a,t,r))}for(var i=S(t,r),o=0;o<s.length;o++)if(-1==i.indexOf(t[r-1].markers[o]))for(var l=0;l<i.length;l++){if(-1!=s[o].indexOf(i[l])){var c=i[l];return this.moveAiMarker(t[r-1].markers[o],c,t,r,"moveUnsafeToSafe"),void e(!0)}for(var h=0;h<t[r-1].markers.length;h++)if(h!=o&&-1!=s[o].indexOf(t[r-1].markers[h])){c=t[r-1].markers[h];return this.moveAiMarker(t[r-1].markers[o],c,t,r,"moveUnsafeToSafe"),void e(!0)}}e(!1)},n.moveOutOfStart=function(e){for(var t=this.state.players.slice(),r=Object.assign(this.state.turn),s=[],n=0;n<t[r-1].markers.length;n++){var a=t[r-1].markers[n];s.push(x(a,t,r))}for(var i=0;i<s.length;i++){var o=t[r-1].enters;if(-1!=s[i].indexOf(o)){var l=t[r-1].markers[i];return this.moveAiMarker(l,o,t,r,"moveOutOfStart"),void e(!0)}}e(!1)},n.moveIntoHome=function(e){for(var t=this.state.players.slice(),r=Object.assign(this.state.turn),s=[],n=0;n<t[r-1].markers.length;n++){var a=t[r-1].markers[n];s.push(x(a,t,r))}for(var i=0;i<s.length;i++){var o=-1*r-10;if(-1!=s[i].indexOf(o)){var l=t[r-1].markers[i];return this.moveAiMarker(l,o,t,r,"moveIntoHome"),this.addBonusMove(10),void e(!0)}}e(!1)},n.moveToSafeSpace=function(e){for(var t=this.state.players.slice(),r=Object.assign(this.state.turn),s=[],n=0;n<t[r-1].markers.length;n++){var a=t[r-1].markers[n];s.push(x(a,t,r))}for(var i=S(t,r),o=0;o<s.length;o++)for(var l=0;l<i.length;l++){if(-1!=s[o].indexOf(i[l])){var c=i[l];return this.moveAiMarker(t[r-1].markers[o],c,t,r,"moveToSafeSpace"),void e(!0)}for(var h=0;h<t[r-1].markers.length;h++)if(h!=o&&-1!=s[o].indexOf(t[r-1].markers[h])){c=t[r-1].markers[h];return this.moveAiMarker(t[r-1].markers[o],c,t,r,"moveToSafeSpace"),void e(!0)}}e(!1)},n.moveAwayFromNearbyEnemy=function(e){for(var t=this.state.players.slice(),r=Object.assign(this.state.turn),s=S(t,r),n=[],a=0;a<t[r-1].markers.length;a++){var i=t[r-1].markers[a];if(-1==s.indexOf(i)&&-1==[-11,-12,-13,-14].indexOf(i)){for(var o=!1,l=0;l<t.length;l++)if(t[l].player!=r)for(var c=0;c<t[l].markers.length;c++)for(var h=t[l].markers[c],u=0;u<10;u++)(h=y(h,t[l].enters))==i&&(o=!0);o?n.push(x(i,t,r)):n.push([])}else n.push([])}for(var p=0;p<n.length;p++)if(n[p].length>0){var d=t[r-1].markers[p];return this.moveAiMarker(d,n[p][0],t,r,"moveAwayFromNearbyEnemy"),void e(!0)}e(!1)},n.moveBehindNearestEnemy=function(e){for(var t=this.state.players.slice(),r=Object.assign(this.state.turn),s=[],n=0;n<t[r-1].markers.length;n++){var a=t[r-1].markers[n];s.push(x(a,t,r))}var i=[];for(n=0;n<t[r-1].markers.length;n++)for(var o=t[r-1].markers[n],l=0;l<10;l++){var c=!1;if(null==(o=y(o,t[r-1].enters)))break;for(var h=0;h<t.length;h++)if(t[r-1].player!=t[h].player)for(var u=0;u<t[h].markers.length;u++){var p=t[h].markers[u];if(o==p&&!c){i.push(n);for(var d=s[n].length;d--;){M(t[r-1].markers[n],s[n][d],t[r-1].enters)>M(t[r-1].markers[n],p,t[r-1].enters)&&s[n].splice(d,1)}c=!0}}}for(d=0;d<i.length;d++)for(var f=i[d],m=s[f],v=0;v<m.length;v++){var k=m[v];o=t[r-1].markers[f];return this.moveAiMarker(o,k,t,r,"moveBehindNearestEnemy"),void e(!0)}e(!1)},n.moveMostAdvanced=function(e){for(var t=this.state.players.slice(),r=Object.assign(this.state.turn),s=[],n=0;n<t[r-1].markers.length;n++){var a=t[r-1].markers[n];s.push(x(a,t,r))}for(var i=[],o=null,l=0;l<t[r-1].markers.length;l++){var c=-900;for(a=0;a<t[r-1].markers.length;a++){var h=-1;t[r-1].markers[a]==t[r-1].enters?h=0:-1==[-1,-2,-3,-4].indexOf(t[r-1].markers[a])&&(h=M(t[r-1].enters,t[r-1].markers[a],t[r-1].enters)),-1==i.indexOf(a)&&c<h&&(c=h,o=a)}i.push(o)}for(a=0;a<i.length;a++){var u=t[r-1].markers[i[a]],p=s[i[a]];for(l=0;l<p.length;l++)return this.moveAiMarker(u,p[l],t,r,"moveMostAdvanced"),void e(!0)}e(!1)},n}return Object(n.a)(r,[{key:"handleChangeConfigurePlayer",value:function(e){var t=e.target.id.split("_"),r="p"==t[0]||"cpu"!=t[0]&&null,s=parseInt(t[1])-1,n=this.state.players.slice();n[s].human=r,this.setState({players:n})}},{key:"handleClickStartGame",value:function(e){for(var t=this.state.players.slice(),r=0,s=0;s<t.length;s++)null!=t[s].human&&r++;if(r>1){var n=Object.assign(this.state.turn)-1;for(this.setState({gameState:0});n=n==t.length?1:n+1,null==t[n-1].human;);this.setState({turn:n,turnComplete:!1},(function(){0==t[n-1].human&&this.startAiTurn()}))}}},{key:"handleClickEndTurn",value:function(e){this.endTurn()}},{key:"handleClickRollDice",value:function(e){this.rollDice((function(){}))}},{key:"handleMouseDownMarker",value:function(e){var t=u.a.findDOMNode(e.target),r=(e.clientX,t.getBoundingClientRect().left,e.clientY,t.getBoundingClientRect().top,t.getBoundingClientRect().left-t.parentNode.getBoundingClientRect().left),s=t.getBoundingClientRect().top-t.parentNode.getBoundingClientRect().top,n=t.currentStyle||window.getComputedStyle(t);t.style.left=r-parseInt(n.marginLeft)+"px",t.style.top=s-parseInt(n.marginTop)+"px",t.style.position="absolute",t.style.zIndex=5e3,t.parentNode.style.zIndex=5e3,t.closest(".quadrant").style.zIndex=5e3,document.onmousemove=function(e){var r=e.clientX-t.parentNode.getBoundingClientRect().left,s=e.clientY-t.parentNode.getBoundingClientRect().top,n=t.currentStyle||window.getComputedStyle(t);t.style.left=r-t.getBoundingClientRect().width/2-parseInt(n.marginLeft)+"px",t.style.top=s-t.getBoundingClientRect().height/2-parseInt(n.marginTop)+"px"}}},{key:"handleMouseUpMarker",value:function(e){document.onmousemove=null;var t=u.a.findDOMNode(e.target),r=parseInt(t.getAttribute("tokenindex")),s=this.state.players.slice(),n=Object.assign(this.state.turn),a=x(r,s,n);t.style.visibility="hidden";var i=document.elementFromPoint(e.clientX,e.clientY);if(t.style.visibility=null,null!=i){var o=i.closest(".space, .playerHome");if(null!=o){var l=parseInt(o.getAttribute("positionindex"));if(-1!=a.indexOf(l)){for(var c=0;c<s.length;c++)if(s[c].player!=n)for(var h=0;h<s[c].markers.length;h++)if(s[c].markers[h]==l){this.moveMarker(l,-1*s[c].player),this.addBonusMove(20);break}this.moveMarker(r,l),t.style.position=null,t.style.zIndex=null,t.style.left=null,t.style.top=null,t.parentNode.style.zIndex=null,t.closest(".quadrant").style.zIndex=null;for(var p=M(r,l,(s=this.state.players.slice())[n-1].enters),d=C(s[n-1].dice,p),f=0;f<d.length;f++)s[n-1].dice[d[f]].active=!1;if(this.setState({players:s}),-1*s[n-1].player-10==l){this.addBonusMove(10);var m=!1;s=this.state.players.slice();for(var v=0;v<s[n-1].markers.length;v++)-1==[-11,-12,-13,-14].indexOf(s[n-1].markers[v])&&(m=!0);m||(s[n-1].finished=!0,this.setState({players:s}))}return b(s=this.state.players.slice(),n)||s[n-1].dice[0].number==s[n-1].dice[1].number?b(s,n)||s[n-1].dice[0].number!=s[n-1].dice[1].number||this.disableAllDice():(this.disableAllDice(),this.setState({turnComplete:!0})),void this.setState({showMoves:[]})}}}this.setState({showMoves:a}),t.style.position=null,t.style.zIndex=null,t.style.left=null,t.style.top=null,t.parentNode.style.zIndex=null,t.closest(".quadrant").style.zIndex=null}},{key:"render",value:function(){var e=this;return Object(o.jsx)("div",{id:"boardContainer",children:Object(o.jsx)(v,{gameState:this.state.gameState,turn:this.state.turn,onMouseDownMarker:function(t){return e.handleMouseDownMarker(t)},onMouseUpMarker:function(t){return e.handleMouseUpMarker(t)},onClickStartGame:function(t){return e.handleClickStartGame(t)},onChangeConfigurePlayer:function(t){return e.handleChangeConfigurePlayer(t)},onClickRollDice:function(t){return e.handleClickRollDice(t)},onClickEndTurn:function(t){return e.handleClickEndTurn(t)},turnComplete:this.state.turnComplete,showMoves:this.state.showMoves,players:this.state.players})})}}]),r}(c.a.Component);function b(e,t){for(var r=e[t-1],s=!1,n=0;n<r.markers.length;n++){x(r.markers[n],e,t).length>0&&(s=!0)}return s}function g(e,t){for(var r=!1,s=0;s<t.length;s++){for(var n=0,a=0;a<t[s].markers.length;a++)t[s].markers[a]==e&&n++;2==n&&(r=!0)}return r}function y(e,t){return null==e?e:67==e?4==t?e+100:0:16==e&&21==t||33==e&&38==t||50==e&&55==t||e>67&&e<716?e+100:716==e?-14:733==e?-11:750==e?-12:767==e?-13:-1!=[-11,-12,-13,-14].indexOf(e)?null:-1!=[-1,-2,-3,-4].indexOf(e)?t:e+1}function j(e,t,r){for(var s=0;s<t;s++)e=y(e,r);return e}function O(e,t,r,s){for(;e!=t;){if(null==e)return!0;if(e=y(e,r),-1!=[-11,-12,-13,-14].indexOf(e))return!1;if(g(e,s))return!0}return!1}function x(e,t,r){var s=t[r-1],n=[];if(-1!=[-1,-2,-3,-4].indexOf(e)){if(g(s.enters,t))return[];if(!(s.dice[0].active&&5==s.dice[0].number||s.dice[1].active&&5==s.dice[1].number))return[];for(var a=!1,i=0;i<s.dice.length;i++)if(s.dice[i].active)if(5!=s.dice[i].number||a){var o=s.enters+s.dice[i].number;O(s.enters,o,s.enters,t)||n.push(o)}else a=!0,n.push(s.enters)}else{if(-1!=[-11,-12,-13,-14].indexOf(e))return[];var l=s.dice.slice(),c=[];for(i=0;i<l.length;i++)l[i].active&&c.push(l[i]);c.length>1&&c.push({number:c[0].number+c[1].number,active:!0});for(var h=0;h<c.length;h++){if(c[h].active)null==(o=j(e,c[h].number,s.enters))||O(e,o,s.enters,t)||n.push(o)}}for(var u=n.length;u--;)if(n[u]!=s.enters&&-1!=[4,11,16,21,28,33,38,45,50,55,62,67].indexOf(n[u]))for(var p=0;p<t.length;p++)if(t[p].player!=r)for(var d=0;d<t[p].markers.length;d++)t[p].markers[d]==n[u]&&n.splice(u,1);return n}function M(e,t,r){for(var s=0;e!=t;){var n=e;e=y(e,r),-1!=[-1,-2,-3,-4].indexOf(n)?s+=5:s++}return s}function C(e,t){for(var r=0;r<e.length;r++)if(e[r].active&&e[r].number==t)return[r];for(r=0;r<e.length;r++)if(e[r].active)for(var s=0;s<e.length;s++)if(r!=s&&e[s].active&&e[r].number+e[s].number==t)return[r,s];return[]}function S(e,t){for(var r=[4,11,16,21,28,33,38,45,50,55,62,67,-1,-2,-3,-4],s=0;s<e.length;s++)if(e[s].player!=t)for(var n=0;n<e[s].markers.length;n++)if(-1!=[-1,-2,-3,-4].indexOf(e[s].markers[n])){var a=r.indexOf(e[s].enters);-1!=a&&r.splice(a,1)}for(var i=[[67,167,267,367,467,567,667,767],[16,116,216,316,416,516,616,716],[33,133,233,333,433,533,633,733],[50,150,250,350,450,550,650,750]],o=0;o<i[t-1].length;o++)r.push(i[t-1][o]);return r}u.a.render(Object(o.jsx)(k,{}),document.getElementById("root"))}},[[8,1,2]]]);
//# sourceMappingURL=main.1053b658.chunk.js.map